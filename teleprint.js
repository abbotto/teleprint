// teleprint v2.1.0 | Print HTML like a boss
// Copyright (c) 2019 Jared Abbott
// Distributed under the MIT license
!function(e,t,n){"undefined"!=typeof module&&module.exports?module.exports=n():"function"==typeof define&&define.amd?define(n):t.teleprint=n()}(0,window||this,function(){var e=function(e,t,n){var r=e.createElement("script");return r.type="text/javascript",r.async=!1,r.src=n,t.appendChild(r),t},t=function(e,t,n){var r=e.createElement("link");return r.type="text/css",r.rel="stylesheet",r.href=n,t.appendChild(r),t},n={frame:function(e,t,n,r,i,s){return s&&!s.test&&t.focus(),s&&!s.test&&t.print(),delete window.frames[n],e.body.removeChild(r),i},run:function(e,t){var r=t.template.html,i=t.template.url,s=t.template.element?t.template.element.outerHTML:null;if(r||s||!i)return n.init(e,r||s,t);var a=new(window.XMLHttpRequest||ActiveXObject)("MSXML2.XMLHTTP.3.0");a.onreadystatechange=function(){if(4===a.readyState&&200===a.status)return n.init(e,this.responseText,t)},a.open("GET",i,!0),a.send()},init:function(r,i,s){var a="TELEPRINT-"+Date.now(),l='<iframe style="width:1px; height: 1px; position: absolute; left: -9999px" id="'+a+'" name="'+a+'">';r.body.insertAdjacentHTML("afterBegin",l);var d=window.frames[a],o=d.document,c=r.getElementById(a),p=r.createDocumentFragment(),u=r.createDocumentFragment(),f="<!DOCTYPE html><html><head></head><body>";f+=i,f+="</body></html>",o.open(),o.write(f),o.close();var m={styles:0,scripts:0,template:i||!1,print:!!d.print};if(s.inherit){if(s.inherit.css){var h=r.querySelectorAll("link, style");u=scrapeAsset(h,u)}if(s.inherit.js){var v=r.querySelectorAll("script");p=scrapeAsset(v,p)}}if(Array.isArray(s.assets))for(var y=0,w=s.assets?s.assets.length:0;y<w;y++){var g=s.assets[y].substr(s.assets[y].lastIndexOf(".")+1);"css"===g?u=t(r,u,s.assets[y]):"js"===g&&(p=e(r,p,s.assets[y]))}m.styles=u.children?u.children.length:0,m.scripts=p.children?p.children.length:0;var T=o.getElementsByTagName("head")[0];T.appendChild(u),T.appendChild(p);var x=T.lastChild;if(!x||s.test)return n.frame(r,d,a,c,m,s);var E=!0,A=0;x.addEventListener("load",function(){E=!1},0);var b=setInterval(function(){if(!E)return clearInterval(b),n.frame(r,d,a,c,m,s);20===A&&clearInterval(b),A+=1},250)}};return teleprint=(teleprint=function(e){return n.run(window.document||document,e)},"undefined"!=typeof window&&(window.teleprint=teleprint),teleprint),teleprint});
