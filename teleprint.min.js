(function(e,t,r){if(typeof module!=="undefined"&&module.exports){module.exports=r()}else if(typeof define==="function"&&define.amd){define(r)}else{t[e]=r()}})("TELEPRINT",typeof window!=="undefined"?window:this,function(){var e="v2.0.1";"use strict";var t=function e(t){var r=t.template.url;var n=t.template.html;var a=!!t.template.element?t.template.element.outerHTML:null;var i=t.assets;var l=t.test;var s=t.inherit||{};var o=window.document;var d={styles:0,scripts:0,template:false,print:true};function u(e,t){delete window.frames[e];o.body.removeChild(t);return d}function f(e,t){var r;var n=0;var a=e.length;for(;n<a;n++){r=e[n].cloneNode(true);t.appendChild(r)}return t}function c(e,t){var r=o.createElement("script");r.type="text/javascript";r.async=false;r.src=t;e.appendChild(r);return e}function p(e,t){var r=o.createElement("link");r.type="text/css";r.rel="stylesheet";r.href=t;e.appendChild(r);return e}if(!n&&!a&&!!r){var v=window.XMLHttpRequest||ActiveXObject;var m=new v("MSXML2.XMLHTTP.3.0");m.onreadystatechange=function(){if(m.readyState===4&&m.status===200){return h(this.responseText)}};m.open("GET",r,true);m.send()}else{return h(n||a)}function h(e){var t="TELEPRINT-"+Date.now();var r='<iframe style="width:1px; height: 1px; position: absolute; left: -9999px" id="'+t+'" name="'+t+'">';o.body.insertAdjacentHTML("afterBegin",r);var n=o.getElementById(t);var a=window.frames[t];var v=a.document;var m=o.createDocumentFragment();var h=o.createDocumentFragment();var y="<!DOCTYPE html><html><head></head><body>";y+=e;y+="</body></html>";v.open();v.write(y);v.close();if(s===true||s.css===true){var w=o.querySelectorAll("link, style");m=f(w,m)}if(s===true||s.js===true){var g=o.querySelectorAll("script");h=f(g,h)}if(Array.isArray(i)){var T,E;var x=0;var C=i.length;for(;x<C;x++){var L=i[x].substr(i[x].lastIndexOf(".")+1);if(L==="css"){m=p(m,i[x])}else if(L==="js"){h=c(h,i[x])}}}d.styles=m.children.length;d.scripts=h.children.length;d.template=e;if(!a.print)d.print=false;function b(){if(!l)a.focus();if(!l)a.print();return u(t,n)}var A=v.getElementsByTagName("head")[0];A.appendChild(m);A.appendChild(h);var M=A.lastChild;if(!M||!!l)return b();M.addEventListener("load",function(e){return b()},0)}};teleprint=function(){teleprint=function(r){this.version=e;return t(r)};return window.teleprint=teleprint}()});