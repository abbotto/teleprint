(function(e,t,r){if(typeof module!=="undefined"&&module.exports){module.exports=r()}else if(typeof define==="function"&&define.amd){define(r)}else{t[e]=r()}})("TELEPRINT",typeof window!=="undefined"?window:this,function e(){var t="v2.1.0";"use strict";var r=function e(t){var r=t.template.url;var n=t.template.html;var i=!!t.template.element?t.template.element.outerHTML:null;var a=t.assets;var l=t.test;var s=t.inherit||{};var o=window.document;var d={styles:0,scripts:0,template:false,print:true};function u(e,t){delete window.frames[e];o.body.removeChild(t);return d}function f(e,t){var r;var n=0;var i=!!e?e.length:0;for(;n<i;n++){r=e[n].cloneNode(true);t.appendChild(r)}return t}function c(e,t){var r=o.createElement("script");r.type="text/javascript";r.async=false;r.src=t;e.appendChild(r);return e}function p(e,t){var r=o.createElement("link");r.type="text/css";r.rel="stylesheet";r.href=t;e.appendChild(r);return e}if(!n&&!i&&!!r){var v=window.XMLHttpRequest||ActiveXObject;var m=new v("MSXML2.XMLHTTP.3.0");m.onreadystatechange=function(){if(m.readyState===4&&m.status===200){return h(this.responseText)}};m.open("GET",r,true);m.send()}else{return h(n||i)}function h(e){var t="TELEPRINT-"+Date.now();var r='<iframe style="width:1px; height: 1px; position: absolute; left: -9999px" id="'+t+'" name="'+t+'">';o.body.insertAdjacentHTML("afterBegin",r);var n=o.getElementById(t);var i=window.frames[t];var v=i.document;var m=o.createDocumentFragment();var h=o.createDocumentFragment();var y="<!DOCTYPE html><html><head></head><body>";y+=e;y+="</body></html>";v.open();v.write(y);v.close();if(s===true||s.css===true){var w=o.querySelectorAll("link, style");m=f(w,m)}if(s===true||s.js===true){var g=o.querySelectorAll("script");h=f(g,h)}if(Array.isArray(a)){var T,E;var x=0;var b=!!a?a.length:0;for(;x<b;x++){var C=a[x].substr(a[x].lastIndexOf(".")+1);if(C==="css"){m=p(m,a[x])}else if(C==="js"){h=c(h,a[x])}}}d.styles=!!m.children?m.children.length:0;d.scripts=!!h.children?h.children.length:0;d.template=e;if(!i.print)d.print=false;function L(){if(!l)i.focus();if(!l)i.print();return u(t,n)}var I=v.getElementsByTagName("head")[0];I.appendChild(m);I.appendChild(h);var j=I.lastChild;if(!j||!!l)return L();var A=true,M=0;j.addEventListener("load",function(e){A=false},0);var P=setInterval(function(){if(!A){clearInterval(P);return L()}else if(M===20){clearInterval(P);console.log("Print job timed out.")}M+=1},250)}};teleprint=function e(){teleprint=function e(n){this.version=t;return r(n)};if(typeof window!=="undefined"){window.teleprint=teleprint}return teleprint}();return teleprint});